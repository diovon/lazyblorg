  CLOSED: [2016-06-05 So 10:39]
:LOGBOOK:
- State "DONE"       from ""           [2016-06-05 So 10:39]
:END:
:PROPERTIES:
:CREATED:  [2016-06-05 So 10:39]
:ID: 2016-06-05-nexus5cm13
:END:

Da ich aufgrund eines Unfalls länger ans Bett gebunden war, habe ich mich entschlossen, dass ich neben dem Upgraden meines x260 auf Xubuntu 16.04
auch noch mein Nexus 5 auf den aktuellsten Stand bringe. Einerseits habe ich von einer [[https://is.gd/PiVXbo][Sicherheitslücke]] erfahren, die in meiner
alten Version noch existieren sollte und andererseits ich Android 6 haben wollte. Da das Nexus 5 für Entwickler konzipiert wurde und ich schon länger
Cyanogenmod (CM) im Einsatz habe, ist der Upgrade-Prozess keine große Sache. Meine folgende Beschreibung setzt voraus, dass das Nexus5 bereits vorher
mit Cyanogenmod 12.1 betrieben wurde.

** Folgende Schritte sind notwendig:
  1) Datensicherung
  2) Download der letzen CM13 Version über die Updatefunktion und GAPPS
  3) TWRP Aktualisierung
  4) Löschen der bestehenen Daten
  5) Installation CM13
  6) Installation GAPPS
  7) Backupdaten zurückspielen
  8) Installation Xposed Framework

*** Datensicherung

Für die Datensicherung verwende ich schon seit Jahren [[https://is.gd/d3lCca][Titanium Backup]], da ich damit derzeit die besten Erfahrungen gemacht habe.
Ich verwende die Pro-Version, da nur hier die Stapelfunktion freigeschalten ist, sodass ich nicht manuell jedes einzelne Programm oder Funktion
sichern muss. Entweder per ADB oder über Medienfreigabe werden die Sicherungsdaten auf das Notebook übertragen.

Als Messenger und SMS App verwende ich Signal. Um die Nachrichten und SMS nicht zu verlieren, führte ich eine gesonderte Sicherung der Nachrichten durch.

*** Download der letzen CM13 Version über die CM-Updatefunktion und GAPPS

Ich verwende die CM-Updatefunktion, damit ich sicher gehen kann, dass die CM13-Version auch für mein Nexus 5 geeignet ist. Sicherlich kann man sich
das entsprechende Image (ZIP-Datei) auch über die CM-Webseite downloaden. Ist im Grunde nur eine Geschmackssache :-)

Für die Google Apps verwende ich [[http://opengapps.org/][OpenGAPPS]], da hier unterschiedliche Varianten von GAPPS zur Verfügung gestellt werden. Ich verwendete die Stock-Variante und
legte die ZIP-Datei ebenfalls im CM-Update Ordner ab.

*** TWRP Aktualisierung

CM13 benötigt das aktuellste Custom-Recovery, in diesem Fall habe ich mich für TWRP entschieden. Ich bin dabei dieser [[https://twrp.me/devices/lgnexus5.html][Anleitung]]
gefolgt. Bei mir ist das Image unter dem Link "Normal" zum Einsatz gekommen, da ich mich noch nicht getraut habe auf hammerheadcaf zu wechseln.

*** Löschen der bestehenen Daten

Da ich eine Sicherung von meinem System gemacht habe, konnte ich nun getrost den Speicher im Recoverymode leeren.

*** Installation CM13

Der CM-Updateordner wurde durch den vorherigen Schritt nicht gelöscht, daher konnte ich die CM13-ZIP-Datei für die Installation verwenden.

*** Installation GAPPS

Nun folgte die Installation der GAPPS. Die entsprechende ZIP-Datei befand sich ebenfalls im CM-Download Ordner und war daher auch nicht von meinem
vorherigen Schritt betroffen.

*** Backupdaten zurückspielen

Beim ersten Boot startete das Nexus 5 mit dem neuen CM13. Daher musste ich im Wizard die Spracheinstellungen, WLAN Zugangsdaten und Google Kontoinformationen neusetzen.
Der erste Schritt war nun, die Installation von Titanium Backup, um mein Backup einspielen zu können. Per ADB übertrug ich die Backup-Dateien von meinem
Notebook auf das Nexus 5. In Titanium Backup nur noch den Backup-Ordner suchen lassen und schon konnte über die Stapelfunktion das Backup zurückgespielt werden.

Signal kann leider nicht fehlerfrei wiederhergestellt werden. Ich lösche daher immer die App und installiere sie neu, da es sonst zu Authentifizierungsproblemen kommt.
Die Signal Nachrichten und SMS ließen sich über die interne Backupfunktion von Signal wiederherstellen. Leider verliert Signal dabei die Gruppendefinitionen.

*** Installation Xposed Framework

Seit kurzer Zeit verwende ich das Xposed Framework, da ich dadurch den Funktionsumfang von CM13 erweitern kann. Hauptsächlich geht es mir um das Modul
[[https://is.gd/im74Uq][XPrivacy]], wodurch ich Apps noch genauer Rechte entziehen kann. Dafür ist es allerdings notwendig, dass das Xposed Framework
installiert ist. Für CM13 benötigte ich die Version für [[http://dl-xda.xposed.info/framework/sdk23/arm/][Android 6]]. Die Installation erfolgt entweder über die Xposed App oder per Recoverymode.

Nach einem Neustart war nun mein Nexus 5 mit CM13 und meinen alten Einstellungen ausgestattet. Die Xposed Module habe ich noch entsprechend aktualisiert,
aber sonst war nicht mehr viel zu tun. Seit ein paar Tagen habe ich nun das neue System und konnte noch keine Probleme feststellen (Holz-klopf).

